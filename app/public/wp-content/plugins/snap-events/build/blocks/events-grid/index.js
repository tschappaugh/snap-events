(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var s in t)e.o(t,s)&&!e.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:t[s]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.blocks,t=JSON.parse('{"UU":"snap-events/events-grid"}'),s=window.wp.i18n,a=window.wp.blockEditor,o=window.wp.components,l=window.wp.serverSideRender;var r=e.n(l);const i=window.ReactJSXRuntime,c=window.wp.plugins,u=window.wp.editor,p=window.wp.coreData,d=window.wp.data,v=window.wp.element;function g(e){if(!e||8!==e.length)return null;const n=e.substring(0,4),t=e.substring(4,6),s=e.substring(6,8);return new Date(`${n}-${t}-${s}`)}function _(e){const n=g(e);return n?n.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""}function h({label:e,value:n,onChange:t}){const[a,l]=(0,v.useState)(!1);return(0,i.jsxs)("div",{className:"snap-events-date-field",children:[(0,i.jsx)(o.TextControl,{label:e,value:_(n),onFocus:()=>l(!0),readOnly:!0}),a&&(0,i.jsx)(o.Popover,{onClose:()=>l(!1),children:(0,i.jsx)(o.DatePicker,{currentDate:g(n),onChange:e=>{t(function(e){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}`}(e)),l(!1)}})}),n&&(0,i.jsx)(o.Button,{size:"small",variant:"link",onClick:()=>t(""),children:(0,s.__)("Clear","snap-events")})]})}(0,c.registerPlugin)("snap-event-details",{render:function(){const e=(0,d.useSelect)(e=>e("core/editor").getCurrentPostType(),[]),[n,t]=(0,p.useEntityProp)("postType",e,"meta");if("snap_event"!==e)return null;if(!n)return null;const a=(e,s)=>{t({...n,[e]:s})};return(0,i.jsxs)(u.PluginDocumentSettingPanel,{name:"snap-event-details",title:(0,s.__)("Event Details","snap-events"),className:"snap-event-details-panel",children:[(0,i.jsx)(h,{label:(0,s.__)("Start Date","snap-events"),value:n.start_date||"",onChange:e=>a("start_date",e)}),(0,i.jsx)(h,{label:(0,s.__)("End Date","snap-events"),value:n.end_date||"",onChange:e=>a("end_date",e)}),(0,i.jsx)(o.TextControl,{label:(0,s.__)("Venue","snap-events"),value:n.venue||"",onChange:e=>a("venue",e)}),(0,i.jsx)(o.TextControl,{label:(0,s.__)("City","snap-events"),value:n.city||"",onChange:e=>a("city",e)}),(0,i.jsx)(o.TextControl,{label:(0,s.__)("State","snap-events"),value:n.state||"",onChange:e=>a("state",e)}),(0,i.jsx)(o.TextControl,{label:(0,s.__)("Country","snap-events"),value:n.country||"",onChange:e=>a("country",e)})]})}}),(0,n.registerBlockType)(t.UU,{edit:function({attributes:e,setAttributes:n}){const{count:t,columns:l,showExcerpt:c,showImage:u,showDate:p,showLocation:d,city:v,state:g}=e,_=(0,a.useBlockProps)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.InspectorControls,{children:[(0,i.jsxs)(o.PanelBody,{title:(0,s.__)("Display Settings","snap-events"),children:[(0,i.jsx)(o.RangeControl,{label:(0,s.__)("Number of Events","snap-events"),value:t,onChange:e=>n({count:e}),min:1,max:24}),(0,i.jsx)(o.RangeControl,{label:(0,s.__)("Columns","snap-events"),value:l,onChange:e=>n({columns:e}),min:1,max:4})]}),(0,i.jsxs)(o.PanelBody,{title:(0,s.__)("Content Options","snap-events"),initialOpen:!1,children:[(0,i.jsx)(o.ToggleControl,{label:(0,s.__)("Show Featured Image","snap-events"),checked:u,onChange:e=>n({showImage:e})}),(0,i.jsx)(o.ToggleControl,{label:(0,s.__)("Show Date","snap-events"),checked:p,onChange:e=>n({showDate:e})}),(0,i.jsx)(o.ToggleControl,{label:(0,s.__)("Show Location","snap-events"),checked:d,onChange:e=>n({showLocation:e})}),(0,i.jsx)(o.ToggleControl,{label:(0,s.__)("Show Excerpt","snap-events"),checked:c,onChange:e=>n({showExcerpt:e})})]}),(0,i.jsxs)(o.PanelBody,{title:(0,s.__)("Filter Events","snap-events"),initialOpen:!1,children:[(0,i.jsx)(o.TextControl,{label:(0,s.__)("City","snap-events"),value:v,onChange:e=>n({city:e}),help:(0,s.__)("Filter events by city name","snap-events")}),(0,i.jsx)(o.TextControl,{label:(0,s.__)("State","snap-events"),value:g,onChange:e=>n({state:e}),help:(0,s.__)("Filter events by state/province","snap-events")})]})]}),(0,i.jsx)("div",{..._,children:(0,i.jsx)(r(),{block:"snap-events/events-grid",attributes:e})})]})},save:function(){return null}})})();